/*
 * Please see the included README.md file for license terms and conditions.
 */


// This file is a suggested starting place for your code.
// It is completely optional and not required.
// Note the reference that includes it in the index.html file.


/*jslint browser:true, devel:true, white:true, vars:true */
/*global $:false, intel:false app:false, dev:false, cordova:false */


// For improved debugging and maintenance of your app, it is highly
// recommended that you separate your JavaScript from your HTML files.
// Use the addEventListener() method to associate events with DOM elements.

// For example:

// var el ;
// el = document.getElementById("id_myButton") ;
// el.addEventListener("click", myEventHandler, false) ;



// The function below is an example of the best way to "start" your app.
// This example is calling the standard Cordova "hide splashscreen" function.
// You can add other code to it or add additional functions that are triggered
// by the same event or other events.

function onAppReady() {

$(".button-collapse").sideNav();
    $('#modal1').openModal();
        var options = new ContactFindOptions();
                options.filter = "";
                options.multiple=true; // obtiene mas de un resultado
                var fields =  ["displayName", "name","phoneNumbers"];// el * es para obtener TODOS los campos (displayName, name, etc)
                navigator.contacts.find(fields, onSuccess, onError, options);
    
   
}
document.addEventListener("app.Ready", onAppReady, false) ;
// document.addEventListener("deviceready", onAppReady, false) ;
// document.addEventListener("onload", onAppReady, false) ;

// The app.Ready event shown above is generated by the init-dev.js file; it
// unifies a variety of common "ready" events. See the init-dev.js file for
// more details. You can use a different event to start your app, instead of
// this event. A few examples are shown in the sample code above. If you are
// using Cordova plugins you need to either use this app.Ready event or the
// standard Crordova deviceready event. Others will either not work or will
// work poorly.

// NOTE: change "dev.LOG" in "init-dev.js" to "true" to enable some console.log
// messages that can help you debug Cordova app initialization issues.

function onSuccess(contacts) {
   $('#modal1').closeModal();
    //alert('Found ' + contacts.length + ' contacts.');
                for (var i = 0; i < contacts.length; i++) {
                    console.log("Display Name = " + contacts[i].displayName+'ID: '+i);
                    
                    if(contacts[i].displayName!=null){
                        
                    var html='<ul class="collection"><li class="collection-item avatar"><img src="images/logo.png"  width="42" height="42" alt="" class="circle"><span class="title">'+contacts[i].displayName+'</span><p>'+contacts[i].name.formatted+'</p><a href="#!" class="view-detail waves-effect waves-light btn secondary-content" data-id="'+i+'" onclick="Cargando()">Ver</a></li></ul>';
                    
                    /*var cardContact='<div id="page-contact-'+i+'" class="contact-'+i+' none hoverable"><div class="card small"><div class="card-image waves-effect waves-block waves-light"><img class="activator" src="images/logo.png"></div><div class="card-content"><span class="card-title activator grey-text text-darken-4">'+contacts[i].displayName+'</span><p><a href="#">This is a link</a></p></div><div class="card-reveal"><span class="card-title grey-text text-darken-4">'+contacts[i].name.formatted+'<i class="material-icons right">close</i></span><p>Here is some more information about this product that is only revealed once clicked on.</p></div></div></div>';*/
                    
                    $('#contenedor').append(html);
                    }
                }
            }

function onError(contactError) {
                alert('onError!');
            }

function Cargando(){
    alert("Detalle de contacto");
    //var loader='<div class="preloader-wrapper big active"><div class="spinner-layer spinner-blue"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div>';
    
    //return loader;
}
function LoadCard(){
    //alert('hola');
    $('.view-detail').click(function(event) {
        var IDcontact=$(this).data('id');
        $('.contact-'+IDcontact).slideToggle('slow');
        //alert('ID: '+IDcontact);
    });
}